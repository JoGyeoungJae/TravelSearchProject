<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">
<div layout:fragment="content">

    <div class="hero hero-inner">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 mx-auto text-center">
                    <div class="intro-wrap">
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="untree_co-section">
        <div class="container my-5">
            <div class="row justify-content-center">
                <div class="col-lg-4">

                    <div class="custom-block" data-aos="fade-up" data-aos-delay="100">
                        <h2 class="section-title">회원가입</h2>
                        <form class="contact-form bg-white" id="form" action="" role="form" method="post">
                            <input type="hidden" name="mid" th:value="${member.mid}">
                            <input type="hidden" name="password" th:value="${member.password}">
                            <input type="hidden" name="role" th:value="${member.role}">
                            <div class="form-group">
                                <label class="text-black" for="email">이메일</label>
                                <input type="email" name="email" class="form-control" id="email"
                                       th:value="${member.email}" aria-describedby="emailHelp" readonly="readonly">
                            </div>
                            <div class="form-group">
                                <label class="text-black" for="name">이름</label>
                                <input type="text" name="name" class="form-control" id="name" th:value="${member.name}"
                                       aria-describedby="emailHelp" readonly="readonly">
                            </div>
                            <div class="form-group">
                                <label class="text-black" for="nickname">닉네임</label>
                                <input type="text" name="nickname" class="form-control" id="nickname"
                                       th:value="${member.nickname}" aria-describedby="emailHelp">
                            </div>
                            <div class="form-group">
                                <label class="text-black" for="tel">전화번호</label>
                                <input type="text" name="tel" class="form-control" id="tel" th:value="${member.tel}"
                                       aria-describedby="emailHelp">
                            </div>
                            <button type="button" id="modifyBtn" class="btn btn-primary" style="width: 49%; margin-top: 6%;">수정
                            </button>
                            <button type="button"id="removeBtn" class="btn btn-primary" style="width: 49%; margin-top: 6%;">탈퇴
                            </button>
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                        </form>
                        <script>
                            $("#removeBtn").on("click", function () {
                                if (!confirm("정말로 탈퇴하시겠습니까?")) return;
                                let form = $("#form");
                                form.attr("action", "[[@{/members/remove(mid=${member.mid})}]]");
                                form.attr("method", "post");
                                form.submit();
                            });

                            $("#modifyBtn").on("click", function () {
                                let form = $("#form");
                                form.attr("action", "[[@{/members/memberMod}]]");
                                form.attr("method", "post");
                                form.submit();
                            });
                        </script>
                    </div>
                </div>
            </div>

        </div>
    </div>

</div>

</html>